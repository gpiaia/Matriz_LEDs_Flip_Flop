#include <iostream>
#include <string>
#include <bitset>
#include <stdio.h>
#include <stdlib.h>
#include <fstream>
#include <iomanip>

using namespace std;

std::string Caracteres[][8] =
            {
               {  "0001000",
                  "0010100",
                  "0100010",
                  "1000001",
                  "1111111",
                  "1000001",
                  "1000001",
                  "0000000"},  ///A

              {   "1111110",
                  "0100001",
                  "0100001",
                  "0111110",
                  "0100001",
                  "0100001",
                  "1111110",
                  "0000000"}, ///B ...

               {  "0011111",
                  "0100000",
                  "1000000",
                  "1000000",
                  "1000000",
                  "0100000",
                  "0011111",
                  "0000000"},


              {   "1111100",
                  "0100010",
                  "0100001",
                  "0100001",
                  "0100001",
                  "0100010",
                  "1111100",
                  "0000000"},

              {   "1111111",
                  "1000000",
                  "1000000",
                  "1111100",
                  "1000000",
                  "1000000",
                  "1111111",
                  "0000000"},

              {   "1111111",
                  "1000000",
                  "1000000",
                  "1111100",
                  "1000000",
                  "1000000",
                  "1000000",
                  "0000000"},

            {     "0011111",
                  "0100000",
                  "1000000",
                  "1001111",
                  "1000001",
                  "0100001",
                  "0011111",
                  "0000000"},

            {     "1000001",
                  "1000001",
                  "1000001",
                  "1111111",
                  "1000001",
                  "1000001",
                  "1000001",
                  "0000000"},

              {   "1111111",
                  "0001000",
                  "0001000",
                  "0001000",
                  "0001000",
                  "0001000",
                  "1111111",
                  "0000000"},

              {   "0001111",
                  "0000001",
                  "0000001",
                  "0000001",
                  "0000001",
                  "1000001",
                  "0111110",
                  "0000000"},

              {   "1000011",
                  "1000100",
                  "1001000",
                  "1110000",
                  "1001000",
                  "1000100",
                  "1000011",
                  "0000000"},

              {   "1000000",
                  "1000000",
                  "1000000",
                  "1000000",
                  "1000000",
                  "1000000",
                  "1111111",
                  "0000000"},

              {   "1110110",
                  "1001001",
                  "1001001",
                  "1001001",
                  "1001001",
                  "1001001",
                  "1001001",
                  "0000000"},

              {   "1000001",
                  "1100001",
                  "1010001",
                  "1001001",
                  "1000101",
                  "1000011",
                  "1000001",
                  "0000000"},

              {   "0011100",
                  "0100010",
                  "1000001",
                  "1000001",
                  "1000001",
                  "0100010",
                  "0011100",
                  "0000000"},

              {   "1111110",
                  "0100001",
                  "0100001",
                  "0111110",
                  "0100000",
                  "0100000",
                  "0100000",
                  "0000000"},

              {   "0011100",
                  "0100010",
                  "1000001",
                  "1000001",
                  "1000101",
                  "0100010",
                  "0011101",
                  "0000000"},

              {   "1111110",
                  "0100001",
                  "0100001",
                  "0101110",
                  "0100100",
                  "0100010",
                  "0100001",
                  "0000000"},

              {   "0111111",
                  "1000000",
                  "1000000",
                  "0111110",
                  "0000001",
                  "0000001",
                  "1111110",
                  "0000000"},

              {   "1111111",
                  "0001000",
                  "0001000",
                  "0001000",
                  "0001000",
                  "0001000",
                  "0001000",
                  "0000000"},

              {   "1000001",
                  "1000001",
                  "1000001",
                  "1000001",
                  "1000001",
                  "1000001",
                  "0111110",
                  "0000000"},

              {   "1000001",
                  "1000001",
                  "1000001",
                  "1000001",
                  "0100010",
                  "0010100",
                  "0001000",
                  "0000000"},

               {  "1000001",
                  "1001001",
                  "1001001",
                  "1001001",
                  "1001001",
                  "1001001",
                  "0110110",
                  "0000000"},

              {   "1000001",
                  "0100010",
                  "0010100",
                  "0001000",
                  "0010100",
                  "0100010",
                  "1000001",
                  "0000000"},

              {   "1000001",
                  "0100010",
                  "0010100",
                  "0001000",
                  "0001000",
                  "0001000",
                  "0001000",
                  "0000000"},

              {   "1111111",
                  "0000010",
                  "0000100",
                  "0111110",
                  "0010000",
                  "0100000",
                  "1111111",
                  "0000000"}
};

int main()
{
    std::fstream Arquivo_hex;
    Arquivo_hex.open ("_memoria", std::fstream::in | std::fstream::out);
    int Binar;
    char Hex[8];
    std::string Frase;
    int referencia=0;
    static char aux;

    if (Arquivo_hex!=NULL){
        Arquivo_hex.clear();
        Arquivo_hex << "v2.0 raw" << endl;

         while(Frase!="/0"){

            cout << "Digite uma frase COM LETRAS MAIUSCULAS ou /0 para SAIR" <<endl;
            cin >> Frase;
            Arquivo_hex << "0 0 0" << endl;

            for (int i=0; i<Frase.length(); ++i){
                aux = Frase[i];
                referencia = static_cast<char>(aux) - 65;

                if (referencia>=0 & referencia<=26 ){

                    for(int j=0; j<8; j++){
                        string binary_str(Caracteres[referencia][j]);
                        bitset<7> set(binary_str);
                        Binar = set.to_ulong();
                        sprintf(Hex,"%X", Binar);
                        Arquivo_hex << Hex;
                        Arquivo_hex << " ";
                        }
                }

                else{
                    if(Frase!="/0"){
                    cout << "Caracter invalido!!!" << endl;
                    }
                }

                Arquivo_hex << endl;
			}

            cout <<endl;
        }
            Arquivo_hex << "90 "; /// PARA INDICAR O FIM DO ARQUIVO E RECOMEÇAR A LEITURA DA MEMÓRIA ROM
            Arquivo_hex.close();
    }
   return 0;
}
